!function(t,e){"use strict";class i extends Datepicker{static initialize(t){e("input.datepicker",t).each((function(){let t=e(this);new i(t,{language:t.data("date-lang")})}))}constructor(t,i={}){Object.assign(i,{orientation:"bottom",buttonClass:"btn",weekStart:1,todayHighlight:!0,autohide:!0,format:"dd.mm.yyyy"}),super(t[0],i);let s=e("<button>...</button>").addClass("datepicker-trigger btn btn-default");t.after(s),this.toggle_picker=this.toggle_picker.bind(this),s.off("mousedown").on("mousedown",this.toggle_picker),s.on("click",(t=>{t.preventDefault()}))}toggle_picker(t){t.preventDefault(),t.stopPropagation(),this.active?this.hide():this.show()}}class s{static initialize(t){e("input.timepicker",t).each((function(){let t=e(this);t.attr("spellcheck",!1),new s(t,{language:t.data("time-lang"),hour:"Stunde",minute:"Minute",clock:t.data("time-clock")})}))}constructor(t,i){if(this.elem=t,this.locale=i,this.hours=[],this.minutes=[],this.period=null,this.hour="",this.minute="",this.elem.val(""),this.dropdown=e('<div class="timepicker-dropdown"/>'),this.dropdown_container=e('<div class="timepicker-container"/>'),this.trigger_elem=e("<button>...</button>").addClass("timepicker-trigger btn btn-default"),this.hours_content=e("<div />").addClass("hours-content"),this.minutes_content=e("<div />").addClass("minutes-content"),this.hours_elem=e("<div />").addClass("timepicker-hours").append(`<div class="header">${this.locale.hour}</div>`).append(this.hours_content),this.minutes_elem=e("<div />").addClass("timepicker-minutes").append(`<div class="header">${this.locale.minute}</>`).append(this.minutes_content),24===this.locale.clock)for(let t=0;t<24;t++){let i=t;t<10&&(i="0"+t);let s=e(`<div class="cell">${i}</div>`);this.hours_content.append(s);let h=new o(s,this);this.hours.push(h)}else if(12===this.locale.clock){this.hours_am=e('<div class="am" />'),this.hours_pm=e('<div class="pm" />'),this.hours_content.css("display","block").append('<span class="am">A.M.</span>').append(this.hours_am).append('<span class="pm">P.M.</span>').append(this.hours_pm);for(let t=0;t<12;t++){let i=t;t<10&&(i="0"+t);let s=e(`<div class="cell">${i}</div>`);this.hours_am.append(s);let h=new o(s,this,"AM");this.hours.push(h)}for(let t=0;t<12;t++){let i=t;0===t?i="12":t<10&&(i="0"+t);let s=e(`<div class="cell">${i}</div>`);this.hours_pm.append(s);let h=new o(s,this,"PM");this.hours.push(h)}}for(let t=0;t<12;t++){let i=5*t;i<10&&(i="0"+i);let s=e(`<div class="cell">${i}</div>`);this.minutes_content.append(s);let o=new h(s,this);this.minutes.push(o)}this.elem.after(this.dropdown);let s=this.elem.offset().left-this.elem.parent().offset().left;this.dropdown.css("left",`${s}px`),this.elem.after(this.trigger_elem),this.dropdown.append(this.dropdown_container),this.dropdown_container.append(this.hours_elem).append(this.minutes_elem),this.show_dropdown=this.show_dropdown.bind(this),this.toggle_dropdown=this.toggle_dropdown.bind(this),this.hide_dropdown=this.hide_dropdown.bind(this),this.elem.on("focus",this.show_dropdown),this.trigger_elem.on("click",this.toggle_dropdown),e(document).on("click",this.hide_dropdown)}get hour(){return this._hour}set hour(t){this._hour=t,this.set_time()}get minute(){return this._minute}set minute(t){this._minute=t,this.set_time()}set_time(){""!==this.hour&&""!==this.minute&&(24===this.locale.clock?this.elem.val(`${this.hour}:${this.minute}`):12===this.locale.clock&&this.elem.val(`${this.hour}:${this.minute}${this.period}`),this.hour="",this.minute="",this.dropdown.hide())}hide_dropdown(t){t.target!==this.elem[0]&&t.target!==this.trigger_elem[0]&&0===e(t.target).closest(this.dropdown).length&&this.dropdown.hide()}show_dropdown(){this.dropdown.show()}toggle_dropdown(t){t.preventDefault(),this.dropdown.toggle()}}class o{constructor(t,e,i){this.elem=t,this.picker=e,this.period=i,this.click_handle=this.click_handle.bind(this),this.elem.on("click",this.click_handle)}click_handle(t){let e=this.elem.text();for(let t of this.picker.hours)t.elem.removeClass("selected");this.elem.addClass("selected"),this.picker.period=this.period,this.picker.hour=e}}class h{constructor(t,e){this.elem=t,this.picker=e,this.click_handle=this.click_handle.bind(this),this.elem.on("click",this.click_handle)}click_handle(t){let e=this.elem.text();for(let t of this.picker.minutes)t.elem.removeClass("selected");this.elem.addClass("selected"),this.picker.minute=e}}e((function(){void 0!==window.ts?(ts.ajax.register(i.initialize,!0),ts.ajax.register(s.initialize,!0)):void 0!==window.bdajax?(bdajax.register(i.initialize,!0),bdajax.register(s.initialize,!0)):(i.initialize(),s.initialize())})),t.DatepickerWidget=i,t.TimepickerWidget=s,Object.defineProperty(t,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.datetime=t}({},jQuery);
