!function(t,e){"use strict";class i{constructor(t,i){if(this.elem=t,this.hours=[],this.minutes=[],this.locale=i,this.hour="00",this.minute="00",this.elem.val(""),this.dropdown=e('<div class="timepicker-dropdown"/>'),this.dropdown_container=e('<div class="timepicker-container"/>'),this.btn_trigger=e("<button>...</button>").addClass("timepicker-trigger btn btn-default"),this.hours_content=e("<div />").addClass("hours-content"),this.minutes_content=e("<div />").addClass("minutes-content"),this.hours_elem=e("<div />").addClass("timepicker-hours").append(`<div class="header">${this.locale.hour}</div>`).append(this.hours_content),this.minutes_elem=e("<div />").addClass("timepicker-minutes").append(`<div class="header">${this.locale.minute}</>`).append(this.minutes_content),"eu"===this.locale.timeFormat)for(let t=0;t<24;t++){let i=t;t<10&&(i="0"+t);let o=e(`<div class="cell">${i}</div>`);this.hours_content.append(o);let h=new s(o,this);this.hours.push(h)}else if("us"===this.locale.timeFormat){this.hours_am=e('<div class="am" />'),this.hours_pm=e('<div class="pm" />'),this.hours_content.css("display","block").append('<span class="am">A.M.</span>').append(this.hours_am).append('<span class="pm">P.M.</span>').append(this.hours_pm);for(let t=0;t<12;t++){let i=t;t<10&&(i="0"+t);let o=e(`<div class="cell">${i}</div>`);this.hours_am.append(o);let h=new s(o,this,"AM");this.hours.push(h)}for(let t=0;t<12;t++){let i=t;0===t?i="12":t<10&&(i="0"+t);let o=e(`<div class="cell">${i}</div>`);this.hours_pm.append(o);let h=new s(o,this,"PM");this.hours.push(h)}}for(let t=0;t<12;t++){let i=5*t;i<10&&(i="0"+i);let s=e(`<div class="cell">${i}</div>`);this.minutes_content.append(s);let h=new o(s,this);this.minutes.push(h)}this.elem.after(this.dropdown);let h=this.elem.offset().left-this.elem.parent().offset().left;this.dropdown.css("left",`${h}px`),this.elem.after(this.btn_trigger),this.dropdown.append(this.dropdown_container),this.dropdown_container.append(this.hours_elem).append(this.minutes_elem),this.show_dropdown=this.show_dropdown.bind(this),this.toggle_dropdown=this.toggle_dropdown.bind(this),this.hide_dropdown=this.hide_dropdown.bind(this),this.elem.on("focus",this.show_dropdown),this.btn_trigger.on("click",this.toggle_dropdown),e(document).on("click",this.hide_dropdown)}get hour(){return this._hour}set hour(t){this._hour=t,this.set_time()}get minute(){return this._minute}set minute(t){this._minute=t,this.set_time()}get timeFormat(){return this._timeFormat}set timeFormat(t){this._timeFormat=t}set_time(){"eu"===this.locale.timeFormat?this.elem.val(`${this.hour}:${this.minute}`):"us"===this.locale.timeFormat&&this.elem.val(`${this.hour}:${this.minute}${this.timeFormat}`)}hide_dropdown(t){t.target!==this.elem[0]&&t.target!==this.btn_trigger[0]&&0===e(t.target).closest(this.dropdown).length&&this.dropdown.hide()}show_dropdown(){this.dropdown.show()}toggle_dropdown(t){t.preventDefault(),this.dropdown.toggle()}}class s{constructor(t,e,i){this.elem=t,this.picker=e,this.timeFormat=i,this.click_handle=this.click_handle.bind(this),this.elem.on("click",this.click_handle)}click_handle(t){let e=this.elem.text();for(let t of this.picker.hours)t.elem.removeClass("selected");this.elem.addClass("selected"),this.picker.timeFormat=this.timeFormat,this.picker.hour=e}}class o{constructor(t,e){this.elem=t,this.picker=e,this.click_handle=this.click_handle.bind(this),this.elem.on("click",this.click_handle)}click_handle(t){let e=this.elem.text();for(let t of this.picker.minutes)t.elem.removeClass("selected");this.elem.addClass("selected"),this.picker.minute=e}}class h{static initialize(t){e("input.datepicker",t).each((function(){let t=e(this),i=new Datepicker(t[0],{orientation:"bottom",buttonClass:"btn",weekStart:1,todayHighlight:!0,language:"de"}),s=e("<button>...</button>").addClass("datepicker-trigger btn btn-default");t.after(s);let o=function(t){t.preventDefault(),t.stopPropagation(),e(i.picker.element).hasClass("active")?i.hide():i.show()}.bind(i);s.off("mousedown",o).on("mousedown",o),s.on("click",(t=>{t.preventDefault()}))})),e("input.timepicker",t).each((function(){let t=e(this);t.attr("spellcheck",!1),new i(t,{lang:"de",hour:"Stunde",minute:"Minute",timeFormat:"eu"})}))}}e((function(){void 0!==window.ts?ts.ajax.register(h.initialize,!0):h.initialize()})),t.DateTimeWidget=h,t.Timepicker=i,Object.defineProperty(t,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.datetime=t}({},jQuery);
