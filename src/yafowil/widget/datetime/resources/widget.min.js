var yafowil_datetime=function(e,t){"use strict";class i extends Datepicker{static initialize(e){t("input.datepicker",e).each((function(){let e=t(this);new i(e,e.data("date-locale"))}))}constructor(e,s,r={}){let l={language:s,orientation:"bottom",buttonClass:"btn",todayHighlight:!0,autohide:!0},n=i.locale_options;Object.assign(l,n[s]||n.en),Object.assign(l,r),super(e[0],l);let a=t("<button>...</button>").addClass("datepicker-trigger btn btn-default");e.after(a),this.toggle_picker=this.toggle_picker.bind(this),a.off("mousedown").on("mousedown",this.toggle_picker),a.on("click",(e=>{e.preventDefault()}))}toggle_picker(e){e.preventDefault(),e.stopPropagation(),this.active?this.hide():this.show()}}i.locale_options={en:{weekStart:1,format:"mm.dd.yyyy"},de:{weekStart:1,format:"dd.mm.yyyy"}};class s{constructor(e){this.elem=e}get selected(){return this.elem.hasClass("selected")}set selected(e){e?this.elem.addClass("selected"):this.elem.removeClass("selected")}}class r{constructor(e,t){this.picker=e,this.elem=t,this.children=[]}unselect_all(){for(let e of this.children)e.selected=!1}}class l extends s{constructor(e,i,s,r){super(t("<div />").addClass("cell").text(new String(s).padStart(2,"0")).appendTo(i)),this.hours=e,this.picker=e.picker,this.period=r,this.click_handle=this.click_handle.bind(this),this.elem.on("click",this.click_handle)}click_handle(e){let t=this.elem.text();this.hours.unselect_all(),this.selected=!0,this.picker.period=this.period,this.picker.hour=t}}class n extends s{constructor(e,i,s){super(t("<div />").addClass("cell").text(new String(s).padStart(2,"0")).appendTo(i)),this.minutes=e,this.picker=e.picker,this.click_handle=this.click_handle.bind(this),this.elem.on("click",this.click_handle)}click_handle(e){let t=this.elem.text();this.minutes.unselect_all(),this.selected=!0,this.picker.minute=t}}class a extends r{constructor(e,i){super(e,t("<div />").addClass("hours-content")),24===e.clock?this.create_clock_24():12===e.clock&&this.create_clock_12();let s=t("<div />").addClass("header").text(e.translate("hour"));t("<div />").addClass("timepicker-hours").append(s).append(this.elem).appendTo(i)}create_clock_24(){for(let e=0;e<24;e++)this.children.push(new l(this,this.elem,e))}create_clock_12(){let e=t('<div class="am" />');for(let t=0;t<12;t++)this.children.push(new l(this,e,t,"AM"));let i=t('<div class="pm" />');for(let e=0;e<12;e++)this.children.push(new l(this,i,e,"PM"));this.elem.css("display","block").append('<span class="am">A.M.</span>').append(e).append('<span class="pm">P.M.</span>').append(i)}}class h extends r{constructor(e,i){super(e,t("<div />").addClass("minutes-content"));for(let e=0;e<12;e++)this.children.push(new n(this,this.elem,5*e));let s=t("<div />").addClass("header").text(e.translate("minute"));t("<div />").addClass("timepicker-minutes").append(s).append(this.elem).appendTo(i)}}class o{static initialize(e){t("input.timepicker",e).each((function(){let e=t(this);e.attr("spellcheck",!1),new o(e,{language:e.data("time-locale"),clock:e.data("time-clock")})}))}constructor(e,i){this.elem=e,this.language=i.language||"en",this.clock=i.clock||24,this.period=null,this.hour="",this.minute="",this.trigger_elem=t("<button>...</button>").addClass("timepicker-trigger btn btn-default"),e.after(this.trigger_elem),this.error_elem=t("<span />").addClass("timepicker-error"),this.trigger_elem.after(this.error_elem);let s=this.dd_elem=t("<div />").addClass("timepicker-dropdown");e.after(s);let r=e.offset().left-e.parent().offset().left;s.css("left",`${r}px`);let l=t("<div />").addClass("timepicker-container").appendTo(s);this.hours=new a(this,l),this.minutes=new h(this,l),this.validate(),this.show_dropdown=this.show_dropdown.bind(this),this.elem.on("focus",this.show_dropdown),this.toggle_dropdown=this.toggle_dropdown.bind(this),this.trigger_elem.on("click",this.toggle_dropdown),this.hide_dropdown=this.hide_dropdown.bind(this),t(document).on("click",this.hide_dropdown),this.input_handle=this.input_handle.bind(this),this.elem.on("keypress",this.input_handle),this.elem.on("keyup",this.validate.bind(this))}unload(){t(document).off("click",this.hide_dropdown)}get hour(){return this._hour}set hour(e){this._hour=e,this.set_time()}get minute(){return this._minute}set minute(e){this._minute=e,this.set_time()}get time(){return this._time}set time(e){this.elem.val(e),this._time=e}set_time(){""!==this.hour&&""!==this.minute&&(24===this.clock?this.elem.val(`${this.hour}:${this.minute}`):12===this.clock&&this.elem.val(`${this.hour}:${this.minute}${this.period}`),this.hour="",this.minute="")}hide_dropdown(e){e.target!==this.elem[0]&&e.target!==this.trigger_elem[0]&&0===t(e.target).closest(this.dd_elem).length&&this.dd_elem.hide()}show_dropdown(e){this.dd_elem.show()}toggle_dropdown(e){e.preventDefault(),this.dd_elem.toggle()}input_handle(e){let t=new RegExp("[0-9]"),i=this.elem.val(),s=e.target.selectionStart;if(s<=4)e.key.match(t)||e.preventDefault(),2===s&&this.elem.val(`${i}:`);else if(5===s){["a","A","p","P"].includes(e.key)||e.preventDefault()}else 6===s?"m"!==e.key&&"M"!==e.key&&e.preventDefault():s>6&&e.preventDefault()}validate(){if(this.error_elem.empty(),!this.elem.val())return;let e=this.elem.val(),t=new RegExp(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/),i=new RegExp(/^(?:0?\d|1[012]):[0-5]\d[apAP][mM]$/),s=e.substr(0,2),r=parseInt(s),l=e.substr(3,2),n=parseInt(l)/5;if(24===this.clock){if(!e.match(t)||e.length<5)return void this.display_error(this.translate("error_time"))}else if(12===this.clock){if(!e.match(i)||e.length<7)return void this.display_error(this.translate("error_time"));if(s<0||s>11)return void this.display_error(this.translate("error_hour"));let t=e.substr(5).toUpperCase();this.period="PM"===t?"PM":"AM","PM"===t&&(r+=12)}"0"===l.substr(1)||"5"===l.substr(1)?(this.hours.children[r].click_handle(),this.minutes.children[n].click_handle()):this.display_error(this.translate("error_minute"))}display_error(e){this.error_elem.text(e).show()}translate(e){let t=this.constructor.locales;return(t[this.language]||t.en)[e]}}return o.locales={en:{hour:"Hour",minute:"Minute",error_time:"Please enter a valid time.",error_hour:"Please enter a valid hour.",error_minute:"Minutes have to be a multiple of 5."},de:{hour:"Stunde",minute:"Minute",error_time:"Bitte geben sie eine korrekte Zeit an.",error_hour:"Bitte geben sie eine korrekte Stunde an.",error_minute:"Minuten müssen in Fünferschritten angegeben werden."}},t((function(){void 0!==window.ts?(ts.ajax.register(i.initialize,!0),ts.ajax.register(o.initialize,!0)):void 0!==window.bdajax?(bdajax.register(i.initialize,!0),bdajax.register(o.initialize,!0)):(i.initialize(),o.initialize())})),e.DatepickerWidget=i,e.TimepickerButton=s,e.TimepickerButtonContainer=r,e.TimepickerHour=l,e.TimepickerHours=a,e.TimepickerMinute=n,e.TimepickerMinutes=h,e.TimepickerWidget=o,Object.defineProperty(e,"__esModule",{value:!0}),void 0===window.yafowil&&(window.yafowil={}),window.yafowil.datetime=e,e}({},jQuery);
